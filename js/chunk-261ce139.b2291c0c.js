(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-261ce139"],{2423:function(t,e,n){"use strict";n.d(e,"f",(function(){return r})),n.d(e,"e",(function(){return i})),n.d(e,"b",(function(){return c})),n.d(e,"d",(function(){return s})),n.d(e,"g",(function(){return o})),n.d(e,"h",(function(){return l})),n.d(e,"i",(function(){return u})),n.d(e,"a",(function(){return f})),n.d(e,"c",(function(){return d}));var a=n("b775");function r(t){return Object(a["a"])({method:"GET",url:"/app/v1_1/articles",params:t})}function i(t){return Object(a["a"])({method:"GET",url:"/app/v1_0/articles/".concat(t)})}function c(t){return Object(a["a"])({method:"POST",url:"/app/v1_0/article/likings",data:{target:t}})}function s(t){return Object(a["a"])({method:"DELETE",url:"/app/v1_0/article/likings/".concat(t)})}function o(t,e){return Object(a["a"])({method:"GET",url:"/app/v1_0/users/".concat(t,"/articles"),params:e})}function l(t){return Object(a["a"])({method:"GET",url:"/app/v1_0/article/collections",params:t})}function u(t){return Object(a["a"])({method:"GET",url:"/app/v1_0/user/histories",params:t})}function f(t){return Object(a["a"])({method:"POST",url:"/app/v1_0/article/collections",data:{target:t}})}function d(t){return Object(a["a"])({method:"DELETE",url:"/app/v1_0/article/collections/".concat(t)})}},2909:function(t,e,n){"use strict";function a(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}n("a4d3"),n("e01a"),n("d28b"),n("a630"),n("e260"),n("d3b7"),n("25f0"),n("3ca3"),n("ddb0");function r(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(t){return a(t)||r(t)||i()}n.d(e,"a",(function(){return c}))},3987:function(t,e,n){"use strict";var a=n("764b"),r=n.n(a);r.a},"435a":function(t,e,n){},"4df4":function(t,e,n){"use strict";var a=n("f8c2"),r=n("7b0b"),i=n("9bdd"),c=n("e95a"),s=n("50c4"),o=n("8418"),l=n("35a1");t.exports=function(t){var e,n,u,f,d,h=r(t),p="function"==typeof this?this:Array,v=arguments.length,b=v>1?arguments[1]:void 0,m=void 0!==b,g=0,_=l(h);if(m&&(b=a(b,v>2?arguments[2]:void 0,2)),void 0==_||p==Array&&c(_))for(e=s(h.length),n=new p(e);e>g;g++)o(n,g,m?b(h[g],g):h[g]);else for(f=_.call(h),d=f.next,n=new p;!(u=d.call(f)).done;g++)o(n,g,m?i(f,b,[u.value,g],!0):u.value);return n.length=g,n}},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var a=n("1d80"),r=n("5899"),i="["+r+"]",c=RegExp("^"+i+i+"*"),s=RegExp(i+i+"*$"),o=function(t){return function(e){var n=String(a(e));return 1&t&&(n=n.replace(c,"")),2&t&&(n=n.replace(s,"")),n}};t.exports={start:o(1),end:o(2),trim:o(3)}},7156:function(t,e,n){var a=n("861d"),r=n("d2bb");t.exports=function(t,e,n){var i,c;return r&&"function"==typeof(i=e.constructor)&&i!==n&&a(c=i.prototype)&&c!==n.prototype&&r(t,c),t}},"764b":function(t,e,n){},"77f8":function(t,e,n){"use strict";var a=n("f9cf"),r=n.n(a);r.a},"7abe":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home page-container"},[n("div",{staticClass:"nav-bar"},[n("div",{staticClass:"logo"}),n("van-button",{staticClass:"search-btn",attrs:{round:"",type:"info",size:"small",icon:"search"},on:{click:function(e){return t.$router.push("/search")}}},[t._v("搜索")])],1),t.channels.length?n("van-tabs",{staticClass:"fixed-tabs",attrs:{swipeable:""},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[t._l(t.channels,(function(t){return n("van-tab",{key:t.id,attrs:{title:t.name}},[n("article-list",{attrs:{channel:t}})],1)})),n("div",{staticClass:"van-tab",staticStyle:{flex:"0 0 8%"},attrs:{slot:"nav-right"},slot:"nav-right"}),n("van-icon",{staticClass:"wap-nav",attrs:{slot:"nav-right",name:"wap-nav"},on:{click:function(e){t.isChannelEditShow=!0}},slot:"nav-right"})],2):t._e(),n("van-popup",{staticClass:"channel-edit-popup",style:{height:"100%"},attrs:{position:"bottom",round:"",overlay:!1},model:{value:t.isChannelEditShow,callback:function(e){t.isChannelEditShow=e},expression:"isChannelEditShow"}},[n("van-nav-bar",{attrs:{title:"编辑频道"}},[n("van-icon",{attrs:{slot:"left",name:"cross",size:"20"},on:{click:function(e){t.isChannelEditShow=!1}},slot:"left"})],1),n("channel-edit",{attrs:{"user-channels":t.channels},on:{close:function(e){t.isChannelEditShow=!1}},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}})],1)],1)},r=[],i=(n("a4d3"),n("4de4"),n("e439"),n("dbb4"),n("b64b"),n("159b"),n("96cf"),n("1da1")),c=n("ade3"),s=n("c24f"),o=n("5d2d"),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article-list"},[n("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshLoading,callback:function(e){t.refreshLoading=e},expression:"refreshLoading"}},[n("van-list",{attrs:{"immediate-check":!1,finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(t,e){return n("article-item",{key:e,attrs:{article:t}})})),1)],1)],1)},u=[],f=n("2909"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return 0===t.article.cover.type?n("div",{staticClass:"article-item article-item-0",on:{click:t.onItemClick}},[n("div",{staticClass:"title"},[t._v(t._s(t.article.title))]),n("div",{staticClass:"label"},[n("span",[t._v(t._s(t.article.aut_name))]),n("span",[t._v(t._s(t.article.comm_count)+"评论")]),n("span",[t._v(t._s(t._f("relativeTime")(t.article.pubdate)))])])]):3===t.article.cover.type?n("div",{staticClass:"article-item article-item-3",on:{click:t.onItemClick}},[n("div",{staticClass:"title van-multi-ellipsis--l2"},[t._v(t._s(t.article.title))]),n("div",{staticClass:"cover"},t._l(t.article.cover.images,(function(t,e){return n("van-image",{key:e,staticClass:"cover-item",attrs:{fit:"cover",src:t,"lazy-load":""}})})),1),n("div",{staticClass:"label"},[n("span",[t._v(t._s(t.article.aut_name))]),n("span",[t._v(t._s(t.article.comm_count)+"评论")]),n("span",[t._v(t._s(t._f("relativeTime")(t.article.pubdate)))])])]):n("div",{staticClass:"article-item article-item-1",on:{click:t.onItemClick}},[n("div",{staticClass:"title-label"},[n("div",{staticClass:"title van-multi-ellipsis--l3"},[t._v(t._s(t.article.title))]),n("div",{staticClass:"label"},[n("span",[t._v(t._s(t.article.aut_name))]),n("span",[t._v(t._s(t.article.comm_count)+"评论")]),n("span",[t._v(t._s(t._f("relativeTime")(t.article.pubdate)))])])]),n("van-image",{staticClass:"cover",attrs:{fit:"cover",src:t.article.cover.images[0],"lazy-load":""}})],1)},h=[],p=(n("d3b7"),n("25f0"),{name:"ArticleInfo",components:{},props:{article:{type:Object,required:!0}},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{onItemClick:function(){this.$router.push({name:"article",params:{articleId:this.article.art_id.toString()}})}}}),v=p,b=(n("dab3"),n("2877")),m=Object(b["a"])(v,d,h,!1,null,"ad8de02a",null),g=m.exports,_=n("2423"),O={name:"",components:{ArticleItem:g},props:{channel:{type:Object,required:!0}},data:function(){return{loading:!1,refreshLoading:!1,list:[],finished:!1,timestamp:null}},computed:{},watch:{},created:function(){this.onLoad()},mounted:function(){},methods:{onLoad:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,Object(_["f"])({channel_id:this.channel.id,timestamp:this.timestamp||Date.now(),with_top:1});case 3:n=t.sent,a=n.data,r=a.data.results,(e=this.list).push.apply(e,Object(f["a"])(r)),this.loading=!1,r.length?this.timestamp=a.data.pre_timestamp:this.finished=!0;case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onRefresh:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,n,a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(_["f"])({channel_id:this.channel.id,timestamp:Date.now(),with_top:1});case 2:n=t.sent,a=n.data,r=a.data.results,(e=this.list).unshift.apply(e,Object(f["a"])(r)),this.refreshLoading=!1,i=r.length?"更新了".concat(r.length,"条数据"):"暂无数据更新",this.$toast(i);case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},C=O,j=(n("77f8"),Object(b["a"])(C,l,u,!1,null,"611d543b",null)),y=j.exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"channel-container"},[n("van-cell",{attrs:{border:!1}},[n("div",{staticClass:"title-wrap",attrs:{slot:"title"},slot:"title"},[n("span",{staticClass:"title"},[t._v("我的频道")]),n("span",{staticClass:"tip"},[t._v("点击进入频道")])]),n("van-button",{attrs:{type:"danger",plain:"",size:"mini",round:"",color:"#e5615b"},on:{click:function(e){t.isEdit=!t.isEdit}}},[t._v(t._s(t.isEdit?"完成":"编辑"))])],1),n("van-grid",{attrs:{gutter:10,clickable:""}},t._l(t.userChannels,(function(e,a){return n("van-grid-item",{key:e.id,staticClass:"channel-item",on:{click:function(n){return t.onChannelActiveOrDelete(e,a)}}},[n("span",{staticClass:"text",class:{active:t.value===a}},[t._v(t._s(e.name))]),n("van-icon",{directives:[{name:"show",rawName:"v-show",value:t.isEdit&&"推荐"!==e.name,expression:"isEdit && channel.name !== '推荐'"}],staticClass:"close-icon",attrs:{name:"close"}})],1)})),1),n("van-cell",{attrs:{border:!1}},[n("div",{staticClass:"title-wrap",attrs:{slot:"title"},slot:"title"},[n("span",{staticClass:"title"},[t._v("推荐频道")]),n("span",{staticClass:"tip"},[t._v("点击添加频道")])])]),n("van-grid",{attrs:{gutter:10,clickable:""}},t._l(t.recommendChannels,(function(e){return n("van-grid-item",{key:e.id,staticClass:"channel-item",on:{click:function(n){return t.onChannelAdd(e)}}},[n("span",{staticClass:"text"},[t._v(t._s(e.name))])])})),1)],1)},E=[],k=(n("7db0"),n("a434"),n("b0c0"),n("a9e3"),n("b775"));function x(){return Object(k["a"])({method:"GET",url:"/app/v1_0/channels"})}var A=function(t){return Object(k["a"])({method:"PATCH",url:"/app/v1_0/user/channels",data:{channels:[t]}})},T=function(t){return Object(k["a"])({method:"DELETE",url:"/app/v1_0/user/channels/".concat(t)})},I=n("2f62");function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var N={name:"ChannelEdit",components:{},props:{userChannels:{type:Array,required:!0},value:{type:Number,default:0}},data:function(){return{isEdit:!1,allChannels:[]}},computed:P({},Object(I["b"])(["user"]),{recommendChannels:function(){var t=this,e=[];return this.allChannels.forEach((function(n){var a=t.userChannels.find((function(t){return t.id===n.id}));a||e.push(n)})),e}}),watch:{},created:function(){this.loadAllChannels()},mounted:function(){},methods:{onChannelActiveOrDelete:function(t,e){this.isEdit&&"推荐"!==t.name?this.deleteChannel(t,e):(this.$emit("input",e),this.$emit("close"))},deleteChannel:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.user){t.next=7;break}return t.next=4,T(e.id);case 4:this.userChannels.splice(n,1),t.next=9;break;case 7:this.userChannels.splice(n,1),Object(o["b"])("channels",this.userChannels);case 9:t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](0),console.log(t.t0),this.$toast("操作失败，请稍后重试");case 15:case"end":return t.stop()}}),t,this,[[0,11]])})));function e(e,n){return t.apply(this,arguments)}return e}(),onChannelAdd:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.user){t.next=7;break}return t.next=4,A({id:e.id,seq:this.userChannels.length});case 4:this.userChannels.push(e),t.next=9;break;case 7:this.userChannels.push(e),Object(o["b"])("channels",this.userChannels);case 9:t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](0),console.log(t.t0),this.$toast("添加失败,请稍后重试");case 15:case"end":return t.stop()}}),t,this,[[0,11]])})));function e(e){return t.apply(this,arguments)}return e}(),loadAllChannels:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,x();case 2:e=t.sent,n=e.data,this.allChannels=n.data.channels;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},R=N,D=(n("3987"),Object(b["a"])(R,w,E,!1,null,"668ab57a",null)),L=D.exports;function G(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function $(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?G(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var F={name:"HomePage",components:{ArticleList:y,ChannelEdit:L},props:{},data:function(){return{active:0,isChannelEditShow:!1,channels:[]}},computed:$({},Object(I["b"])(["user"])),watch:{user:function(){var t=this;this.channels=[],this.active=0,this.$nextTick((function(){return t.loadUserChannels()}))}},activated:function(){},created:function(){this.loadUserChannels()},methods:{loadUserChannels:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,n,a,r,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=[],!this.user){t.next=9;break}return t.next=4,Object(s["f"])();case 4:n=t.sent,a=n.data,e=a.data.channels,t.next=19;break;case 9:if(r=Object(o["a"])("channels"),!r){t.next=14;break}e=r,t.next=19;break;case 14:return t.next=16,Object(s["f"])();case 16:i=t.sent,c=i.data,e=c.data.channels;case 19:this.channels=e;case 20:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},z=F,U=(n("c6c2"),Object(b["a"])(z,a,r,!1,null,"181895b6",null));e["default"]=U.exports},"7db0":function(t,e,n){"use strict";var a=n("23e7"),r=n("b727").find,i=n("44d2"),c="find",s=!0;c in[]&&Array(1)[c]((function(){s=!1})),a({target:"Array",proto:!0,forced:s},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i(c)},a630:function(t,e,n){var a=n("23e7"),r=n("4df4"),i=n("1c7e"),c=!i((function(t){Array.from(t)}));a({target:"Array",stat:!0,forced:c},{from:r})},a9e3:function(t,e,n){"use strict";var a=n("83ab"),r=n("da84"),i=n("94ca"),c=n("6eeb"),s=n("5135"),o=n("c6b6"),l=n("7156"),u=n("c04e"),f=n("d039"),d=n("7c73"),h=n("241c").f,p=n("06cf").f,v=n("9bf2").f,b=n("58a8").trim,m="Number",g=r[m],_=g.prototype,O=o(d(_))==m,C=function(t){var e,n,a,r,i,c,s,o,l=u(t,!1);if("string"==typeof l&&l.length>2)if(l=b(l),e=l.charCodeAt(0),43===e||45===e){if(n=l.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+l}for(i=l.slice(2),c=i.length,s=0;s<c;s++)if(o=i.charCodeAt(s),o<48||o>r)return NaN;return parseInt(i,a)}return+l};if(i(m,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var j,y=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof y&&(O?f((function(){_.valueOf.call(n)})):o(n)!=m)?l(new g(C(e)),n,y):C(e)},w=a?h(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;w.length>E;E++)s(g,j=w[E])&&!s(y,j)&&v(y,j,p(g,j));y.prototype=_,_.constructor=y,c(r,m,y)}},b0c0:function(t,e,n){var a=n("83ab"),r=n("9bf2").f,i=Function.prototype,c=i.toString,s=/^\s*function ([^ (]*)/,o="name";!a||o in i||r(i,o,{configurable:!0,get:function(){try{return c.call(this).match(s)[1]}catch(t){return""}}})},c24f:function(t,e,n){"use strict";n.d(e,"g",(function(){return r})),n.d(e,"f",(function(){return i})),n.d(e,"a",(function(){return c})),n.d(e,"i",(function(){return s})),n.d(e,"d",(function(){return o})),n.d(e,"c",(function(){return l})),n.d(e,"j",(function(){return u})),n.d(e,"k",(function(){return f})),n.d(e,"h",(function(){return d})),n.d(e,"e",(function(){return h})),n.d(e,"b",(function(){return p}));n("d3b7"),n("25f0");var a=n("b775");function r(t){return Object(a["a"])({method:"POST",url:"/app/v1_0/authorizations",data:t})}function i(){return Object(a["a"])({method:"GET",url:"/app/v1_0/user/channels"})}function c(t){return Object(a["a"])({method:"POST",url:"/app/v1_0/user/followings",data:{target:t}})}function s(t){return Object(a["a"])({method:"DELETE",url:"/app/v1_0/user/followings/".concat(t)})}function o(){return Object(a["a"])({method:"GET",url:"/app/v1_0/user"})}function l(t){return Object(a["a"])({method:"GET",url:"/app/v1_0/user/profile"})}function u(t){return Object(a["a"])({method:"PATCH",url:"/app/v1_0/user/photo",data:t})}function f(t){return Object(a["a"])({method:"PATCH",url:"/app/v1_0/user/profile",data:t})}function d(t){return Object(a["a"])({method:"GET",url:"/app/v1_0/sms/codes/".concat(t)})}function h(t){return Object(a["a"])({method:"GET",url:"/app/v1_0/users/".concat(t)})}function p(t,e){return Object(a["a"])({method:"GET",url:"/app/v1_0/user/followers",params:e,data:{target:t.toString()}})}},c6c2:function(t,e,n){"use strict";var a=n("c93a"),r=n.n(a);r.a},c93a:function(t,e,n){},dab3:function(t,e,n){"use strict";var a=n("435a"),r=n.n(a);r.a},f9cf:function(t,e,n){}}]);
//# sourceMappingURL=chunk-261ce139.b2291c0c.js.map