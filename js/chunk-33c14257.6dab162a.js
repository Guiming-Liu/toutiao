(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33c14257"],{"0f41":function(t,e,n){},"1bf8":function(t,e,n){},2423:function(t,e,n){"use strict";n.d(e,"f",(function(){return a})),n.d(e,"e",(function(){return i})),n.d(e,"b",(function(){return c})),n.d(e,"d",(function(){return s})),n.d(e,"g",(function(){return o})),n.d(e,"h",(function(){return u})),n.d(e,"i",(function(){return l})),n.d(e,"a",(function(){return f})),n.d(e,"c",(function(){return d}));var r=n("b775");function a(t){return Object(r["a"])({method:"GET",url:"/app/v1_1/articles",params:t})}function i(t){return Object(r["a"])({method:"GET",url:"/app/v1_0/articles/".concat(t)})}function c(t){return Object(r["a"])({method:"POST",url:"/app/v1_0/article/likings",data:{target:t}})}function s(t){return Object(r["a"])({method:"DELETE",url:"/app/v1_0/article/likings/".concat(t)})}function o(t,e){return Object(r["a"])({method:"GET",url:"/app/v1_0/users/".concat(t,"/articles"),params:e})}function u(t){return Object(r["a"])({method:"GET",url:"/app/v1_0/article/collections",params:t})}function l(t){return Object(r["a"])({method:"GET",url:"/app/v1_0/user/histories",params:t})}function f(t){return Object(r["a"])({method:"POST",url:"/app/v1_0/article/collections",data:{target:t}})}function d(t){return Object(r["a"])({method:"DELETE",url:"/app/v1_0/article/collections/".concat(t)})}},2909:function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}n("a4d3"),n("e01a"),n("d28b"),n("a630"),n("e260"),n("d3b7"),n("25f0"),n("3ca3"),n("ddb0");function a(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(t){return r(t)||a(t)||i()}n.d(e,"a",(function(){return c}))},"2ba3":function(t,e,n){},"2c14":function(t,e,n){},"32b4":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.value,(function(e,r){return n("div",{key:r},[t._t("default",[t._v(t._s(e))],{item:e})],2)})),0)},a=[],i=(n("a9e3"),n("2909")),c=(n("96cf"),n("1da1")),s={name:"LoadingList",components:{},props:{fn:{type:Function,required:!0},value:{type:Array,default:function(){return[]}},totalCount:{type:Number}},data:function(){return{loading:!1,finished:!1,page:1,perPage:10}},computed:{},watch:{},created:function(){},methods:{onLoad:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,n,r,a,c,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.fn({page:this.page,per_page:this.perPage});case 2:n=t.sent,r=n.data,a=r.data,c=a.results,s=a.total_count,(e=this.value).push.apply(e,Object(i["a"])(c)),this.$emit("update:total-count",s),this.loading=!1,c.length?this.page++:this.finished=!0;case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},o=s,u=(n("7b1f"),n("2877")),l=Object(u["a"])(o,r,a,!1,null,"427bd455",null);e["a"]=l.exports},"4df4":function(t,e,n){"use strict";var r=n("f8c2"),a=n("7b0b"),i=n("9bdd"),c=n("e95a"),s=n("50c4"),o=n("8418"),u=n("35a1");t.exports=function(t){var e,n,l,f,d,p=a(t),v="function"==typeof this?this:Array,b=arguments.length,m=b>1?arguments[1]:void 0,h=void 0!==m,_=0,g=u(p);if(h&&(m=r(m,b>2?arguments[2]:void 0,2)),void 0==g||v==Array&&c(g))for(e=s(p.length),n=new v(e);e>_;_++)o(n,_,h?m(p[_],_):p[_]);else for(f=g.call(p),d=f.next,n=new v;!(l=d.call(f)).done;_++)o(n,_,h?i(f,m,[l.value,_],!0):l.value);return n.length=_,n}},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var r=n("1d80"),a=n("5899"),i="["+a+"]",c=RegExp("^"+i+i+"*"),s=RegExp(i+i+"*$"),o=function(t){return function(e){var n=String(r(e));return 1&t&&(n=n.replace(c,"")),2&t&&(n=n.replace(s,"")),n}};t.exports={start:o(1),end:o(2),trim:o(3)}},7156:function(t,e,n){var r=n("861d"),a=n("d2bb");t.exports=function(t,e,n){var i,c;return a&&"function"==typeof(i=e.constructor)&&i!==n&&r(c=i.prototype)&&c!==n.prototype&&a(t,c),t}},"7b1f":function(t,e,n){"use strict";var r=n("0f41"),a=n.n(r);a.a},8112:function(t,e,n){"use strict";var r=n("2ba3"),a=n.n(r);a.a},"9edc":function(t,e,n){"use strict";var r=n("bd7b"),a=n.n(r);a.a},a630:function(t,e,n){var r=n("23e7"),a=n("4df4"),i=n("1c7e"),c=!i((function(t){Array.from(t)}));r({target:"Array",stat:!0,forced:c},{from:a})},a9e3:function(t,e,n){"use strict";var r=n("83ab"),a=n("da84"),i=n("94ca"),c=n("6eeb"),s=n("5135"),o=n("c6b6"),u=n("7156"),l=n("c04e"),f=n("d039"),d=n("7c73"),p=n("241c").f,v=n("06cf").f,b=n("9bf2").f,m=n("58a8").trim,h="Number",_=a[h],g=_.prototype,O=o(d(g))==h,j=function(t){var e,n,r,a,i,c,s,o,u=l(t,!1);if("string"==typeof u&&u.length>2)if(u=m(u),e=u.charCodeAt(0),43===e||45===e){if(n=u.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+u}for(i=u.slice(2),c=i.length,s=0;s<c;s++)if(o=i.charCodeAt(s),o<48||o>a)return NaN;return parseInt(i,r)}return+u};if(i(h,!_(" 0o1")||!_("0b1")||_("+0x1"))){for(var w,y=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof y&&(O?f((function(){g.valueOf.call(n)})):o(n)!=h)?u(new _(j(e)),n,y):j(e)},C=r?p(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;C.length>E;E++)s(_,w=C[E])&&!s(y,w)&&b(y,w,v(_,w));y.prototype=g,g.constructor=y,c(a,h,y)}},b941:function(t,e,n){"use strict";var r=n("2c14"),a=n.n(r);a.a},bd7b:function(t,e,n){},c24f:function(t,e,n){"use strict";n.d(e,"h",(function(){return a})),n.d(e,"g",(function(){return i})),n.d(e,"a",(function(){return c})),n.d(e,"j",(function(){return s})),n.d(e,"e",(function(){return o})),n.d(e,"d",(function(){return u})),n.d(e,"k",(function(){return l})),n.d(e,"l",(function(){return f})),n.d(e,"i",(function(){return d})),n.d(e,"f",(function(){return p})),n.d(e,"c",(function(){return v})),n.d(e,"b",(function(){return b}));n("d3b7"),n("25f0");var r=n("b775");function a(t){return Object(r["a"])({method:"POST",url:"/app/v1_0/authorizations",data:t})}function i(){return Object(r["a"])({method:"GET",url:"/app/v1_0/user/channels"})}function c(t){return Object(r["a"])({method:"POST",url:"/app/v1_0/user/followings",data:{target:t}})}function s(t){return Object(r["a"])({method:"DELETE",url:"/app/v1_0/user/followings/".concat(t)})}function o(){return Object(r["a"])({method:"GET",url:"/app/v1_0/user"})}function u(t){return Object(r["a"])({method:"GET",url:"/app/v1_0/user/profile"})}function l(t){return Object(r["a"])({method:"PATCH",url:"/app/v1_0/user/photo",data:t})}function f(t){return Object(r["a"])({method:"PATCH",url:"/app/v1_0/user/profile",data:t})}function d(t){return Object(r["a"])({method:"GET",url:"/app/v1_0/sms/codes/".concat(t)})}function p(t){return Object(r["a"])({method:"GET",url:"/app/v1_0/users/".concat(t)})}function v(t,e){return Object(r["a"])({method:"GET",url:"/app/v1_0/user/followings",params:e,data:{target:t.toString()}})}function b(t,e){return Object(r["a"])({method:"GET",url:"/app/v1_0/user/followers",params:e,data:{target:t.toString()}})}},d169:function(t,e,n){"use strict";var r=n("1bf8"),a=n.n(r);a.a},e382:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user-container page-container"},[n("van-nav-bar",{staticClass:"page-navbar",attrs:{fixed:"","left-arrow":"",title:t.user.name},on:{"click-left":function(e){return t.$router.back()}}}),n("user-info",{attrs:{user:t.user}}),n("loading-list",{attrs:{fn:t.getArticlesByUser},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.item;return[n("article-item",{attrs:{article:e}})]}}])})],1)},a=[],i=(n("b0c0"),n("a9e3"),n("96cf"),n("1da1")),c=n("c24f"),s=n("2423"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user-info-container"},[n("div",{staticClass:"row1"},[n("van-image",{staticClass:"col1",attrs:{fit:"cover",round:"",src:t.user.photo},on:{click:function(e){return t.onPreview(t.user.photo)}}}),n("div",{staticClass:"col2"},[n("div",{staticClass:"row1"},[n("div",{staticClass:"item"},[n("div",{staticClass:"count"},[t._v(t._s(t.user.art_count))]),n("div",{staticClass:"text"},[t._v("发布")])]),n("div",{staticClass:"item"},[n("div",{staticClass:"count"},[t._v(t._s(t.user.follow_count))]),n("div",{staticClass:"text"},[t._v("关注")])]),n("div",{staticClass:"item"},[n("div",{staticClass:"count"},[t._v(t._s(t.user.fans_count))]),n("div",{staticClass:"text"},[t._v("粉丝")])]),n("div",{staticClass:"item"},[n("div",{staticClass:"count"},[t._v(t._s(t.user.like_count))]),n("div",{staticClass:"text"},[t._v("获赞")])])]),n("div",{staticClass:"action"},[t.sessionUser&&t.user.id===t.sessionUser.user_id?n("van-button",{attrs:{type:"default",size:"small"},on:{click:function(e){return t.$router.push("/user/profile")}}},[t._v("编辑资料")]):[n("van-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.$router.push("/user/chat")}}},[t._v("私信")]),n("follow-user",{attrs:{"user-id":t.user.id},model:{value:t.user.is_following,callback:function(e){t.$set(t.user,"is_following",e)},expression:"user.is_following"}})]],2)])],1),n("div",{staticClass:"intro-wrap"},[t.user.is_media?n("div",[n("span",[t._v("认证：")]),n("span",[t._v(t._s(t.user.certi))])]):t._e(),n("div",[n("span",[t._v("简介：")]),n("span",[t._v(t._s(t.user.intro))])])])])},u=[],l=(n("a4d3"),n("4de4"),n("e439"),n("dbb4"),n("b64b"),n("159b"),n("ade3")),f=n("28a2"),d=n("f50e"),p=n("2f62");function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){Object(l["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var m={name:"UserInfo",props:{user:{type:Object,required:!0}},components:{FollowUser:d["a"]},computed:b({},Object(p["b"])({sessionUser:function(t){return t.user}})),methods:{onPreview:function(t){Object(f["a"])([t])}}},h=m,_=(n("8112"),n("2877")),g=Object(_["a"])(h,o,u,!1,null,"5e74a03e",null),O=g.exports,j=n("32b4"),w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article-item",on:{click:function(e){t.$router.push({name:"article",params:{articleId:t.article.art_id.toString()}})}}},[n("div",{staticClass:"author"},[n("van-image",{staticClass:"avatar",attrs:{round:"",fit:"cover",src:"https://img.yzcdn.cn/vant/cat.jpeg"}}),n("div",[n("div",{staticClass:"name"},[t._v(t._s(t.article.aut_name))]),n("div",{staticClass:"date"},[t._v(t._s(t._f("relativeTime")(t.article.pubdate)))])])],1),t.article.cover.type?n("div",{staticClass:"title-cover"},[n("div",{staticClass:"title"},[t._v(t._s(t.article.title))]),n("van-image",{staticClass:"cover",attrs:{fit:"cover",src:t.article.cover.images[0]}})],1):n("div",{staticClass:"title"},[t._v(t._s(t.article.title))]),n("div",{staticClass:"action"},[n("div",{staticClass:"action-item"},[n("van-icon",{staticClass:"comment-icon",attrs:{name:"comment-o"}}),n("span",[t._v(t._s(t.article.comm_count))])],1),n("div",{staticClass:"action-item"},[n("van-icon",{attrs:{name:"good-job-o"}}),n("span",[t._v(t._s(t.article.like_count))])],1),n("div",{staticClass:"action-item"},[n("van-icon",{attrs:{name:"star-o"}}),n("span",[t._v(t._s(t.article.collect_count))])],1)])])},y=[],C={name:"",components:{},props:{article:{type:Object,required:!0}},data:function(){return{}},computed:{},watch:{},created:function(){},methods:{}},E=C,x=(n("b941"),Object(_["a"])(E,w,y,!1,null,"785f02d9",null)),I=x.exports,T={name:"UserPage",components:{UserInfo:O,LoadingList:j["a"],ArticleItem:I},props:{userId:{type:[String,Number,Object],required:!0}},data:function(){return{user:{id:this.userId},getArticlesByUser:s["g"].bind(null,this.userId)}},computed:{},watch:{},created:function(){this.loadUser()},methods:{loadUser:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["f"])(this.userId);case 2:e=t.sent,n=e.data,this.user=n.data;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},beforeRouteLeave:function(t,e,n){var r=this.$options.name;"article"===t.name?this.$store.commit("addCachePage",r):this.$store.commit("removeCachePage",r),n()}},k=T,A=(n("d169"),Object(_["a"])(k,r,a,!1,null,"a44360c0",null));e["default"]=A.exports},f50e:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-button",t._b({staticClass:"follow-btn",attrs:{type:t.value?"default":"info",size:"small",loading:t.loading},on:{click:function(e){return e.stopPropagation(),t.onFollow(e)}}},"van-button",t.$attrs,!1),[t._t("default",[t._v(" "+t._s(t.value?"已关注":"关注")+" ")])],2)},a=[],i=(n("a9e3"),n("96cf"),n("1da1")),c=n("c24f"),s={name:"FollowUser",components:{},props:{value:{type:Boolean},userId:{type:[Number,String,Object],required:!0}},data:function(){return{loading:!1}},computed:{},watch:{},created:function(){},methods:{onFollow:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.loading=!0,t.prev=1,!this.value){t.next=7;break}return t.next=5,Object(c["j"])(this.userId);case 5:t.next=9;break;case 7:return t.next=9,Object(c["a"])(this.userId);case 9:this.$emit("input",!this.value),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](1),t.t0.response&&400===t.t0.response.status&&this.$toast("你不能关注你自己");case 15:this.loading=!1;case 16:case"end":return t.stop()}}),t,this,[[1,12]])})));function e(){return t.apply(this,arguments)}return e}()}},o=s,u=(n("9edc"),n("2877")),l=Object(u["a"])(o,r,a,!1,null,"3f493a2c",null);e["a"]=l.exports}}]);
//# sourceMappingURL=chunk-33c14257.6dab162a.js.map